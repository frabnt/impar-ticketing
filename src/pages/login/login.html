<!--
  Generated template for the Login page.

  See http://ionicframework.com/docs/v2/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>

  <ion-navbar>
    <logo menuToggle left></logo>
    <ion-title class="header-font">
      LOGIN
    </ion-title>
    <button ion-button menuToggle end (click)="manageAccessCodes()">
      <ion-icon name="bug" class="larger-icon"></ion-icon>
    </button>
  </ion-navbar>

</ion-header>


<ion-content padding>
  <ion-card *ngIf="!accessCodesList.length">
    <ion-card-content>
      <p id="ionCardParagraph">
        <span class="underline">No access code</span> previously added. Go to <span class="italic">settings</span>
        <ion-icon name="bug"></ion-icon> to store a new one.
      </p>
    </ion-card-content>
  </ion-card>

  <ion-item-group *ngIf="accessCodesList.length"
                  class="margin-top">
    <ion-item-divider color="light" class="header-font">
      <ion-icon name="log-in"></ion-icon>
      &nbsp;STORED CODES
    </ion-item-divider>
    <button ion-item detail-none
            *ngFor="let code of accessCodesList; let i=index"
            (click)="login(code)">
      {{ code }}
      <ion-icon name="arrow-forward"
                color="primary"
                class="float-right"></ion-icon>
    </button>
  </ion-item-group>

  <form [formGroup]='loginForm'
        (ngSubmit)="login(loginForm.get('accessCode').value)" novalidate>
    <ion-item class="input-padding-right">
      <ion-label floating>Access code...</ion-label>
      <ion-input type='text'
                 formControlName='accessCode'></ion-input>
    </ion-item>

    <div class="margin-top align-center">
      <button ion-button outline
              class="btn-stretch-width-90"
              color='secondary_custom'
              [disabled]="!loginForm.controls['accessCode'].valid">
        Sign in
      </button>
    </div>
  </form>
</ion-content>
